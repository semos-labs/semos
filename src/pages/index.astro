---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Semos Labs — Terminal, Reimagined">
  <!-- Hero -->
  <section class="min-h-screen flex flex-col md:flex-row items-center justify-center pt-28 md:pt-32 pb-16 px-8 gap-12 md:gap-16 max-w-content mx-auto text-center md:text-left">
    <div class="flex-1 max-w-full md:max-w-[560px]">
      <p class="text-[0.8rem] uppercase tracking-[0.2em] text-gray-400 mb-6">open source terminal tools</p>
      <h1 class="font-hand text-[1.6rem] md:text-[2rem] leading-[1.3] mb-6 tracking-[-0.02em]">
        The terminal deserves<br />
        <span class="text-gray-200 italic">beautiful software.</span>
      </h1>
      <p class="text-[0.95rem] text-gray-300 leading-[1.8] mb-10 max-w-full md:max-w-[460px]">
        Semos Labs builds a family of modern terminal applications and libraries.
        We believe the command line is not a limitation — it's a canvas.
      </p>
      <div>
        <a href="#products" class="btn-primary">Explore Products</a>
      </div>
    </div>
    <div class="flex-1 max-w-full md:max-w-[440px] w-full md:w-auto">
      <div class="bg-gray-900 border border-gray-700 rounded-xl overflow-hidden text-[0.82rem]">
        <div class="flex gap-1.5 px-4 py-3 bg-gray-800 border-b border-gray-700">
          <span class="w-2.5 h-2.5 rounded-full bg-gray-600"></span>
          <span class="w-2.5 h-2.5 rounded-full bg-gray-600"></span>
          <span class="w-2.5 h-2.5 rounded-full bg-gray-600"></span>
        </div>
        <div class="px-6 py-5 leading-[1.9]">
          <p><span class="text-gray-400">$</span> <span class="text-white">bun create @semos-labs/glyph my-tui-app</span></p>
          <p class="text-gray-500">✓ Created project structure</p>
          <p class="text-gray-500">✓ Installed dependencies</p>
          <p class="text-gray-500">✓ Ready to build something great</p>
          <p>&nbsp;</p>
          <p><span class="text-gray-400">$</span> <span class="text-white">bun dev</span></p>
          <p class="text-gray-200">▸ Your TUI is alive ✨</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Why section -->
  <section class="py-24 px-8 border-t border-gray-800">
    <div class="max-w-content mx-auto">
      <h2 class="font-hand text-[2.2rem] md:text-[2.8rem] text-center mb-16">Why Semos?</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
        <div class="p-8 border border-gray-800 rounded-xl transition-colors hover:border-gray-600">
          <span class="block text-2xl mb-4 text-gray-300">⌘</span>
          <h3 class="font-hand text-2xl mb-3">Terminal-First</h3>
          <p class="text-[0.85rem] text-gray-400 leading-[1.7]">We live in the terminal. Our tools are built for developers who think in keystrokes, not clicks.</p>
        </div>
        <div class="p-8 border border-gray-800 rounded-xl transition-colors hover:border-gray-600">
          <span class="block text-2xl mb-4 text-gray-300">◎</span>
          <h3 class="font-hand text-2xl mb-3">React-Powered</h3>
          <p class="text-[0.85rem] text-gray-400 leading-[1.7]">Declarative components meet terminal rendering. Build TUIs the same way you build web apps.</p>
        </div>
        <div class="p-8 border border-gray-800 rounded-xl transition-colors hover:border-gray-600">
          <span class="block text-2xl mb-4 text-gray-300">△</span>
          <h3 class="font-hand text-2xl mb-3">One Ecosystem</h3>
          <p class="text-[0.85rem] text-gray-400 leading-[1.7]">Glyph powers everything. Aion and your next app — all share the same foundation.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Products -->
  <section class="py-24 px-8 border-t border-gray-800" id="products">
    <div class="max-w-content mx-auto">
      <h2 class="font-hand text-[2.2rem] md:text-[2.8rem] text-center mb-16">What We Build</h2>

      <!-- Glyph -->
      <div class="flex flex-col md:flex-row items-center md:items-start gap-6 md:gap-12 p-8 md:p-12 border border-gray-800 rounded-2xl mb-10 transition-colors hover:border-gray-600 text-center md:text-left">
        <div class="shrink-0">
          <img src="/logos/Glyph.png" alt="Glyph" class="w-20 h-20 rounded-2xl" />
        </div>
        <div class="flex-1">
          <div class="flex items-center gap-3 justify-center md:justify-start">
            <h3 class="font-hand text-[2rem] mb-1">Glyph</h3>
            <a class="stars-badge hidden items-center gap-1.5 px-3 py-1 bg-gray-800 border border-gray-600 rounded-full text-[0.8rem] text-gray-200 translate-y-[-2px] hover:border-gray-400 hover:text-white transition-colors" data-repo="semos-labs/glyph" href="https://github.com/semos-labs/glyph" target="_blank" rel="noopener">
              <svg class="w-3.5 h-3.5 fill-amber-400" viewBox="0 0 16 16"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Z"/></svg>
              <span class="stars-count font-mono font-medium">—</span>
            </a>
          </div>
          <p class="text-[0.9rem] text-gray-400 mb-4 italic">React renderer for the terminal</p>
          <p class="text-[0.88rem] text-gray-300 leading-[1.8] mb-5 max-w-full md:max-w-[560px]">
            A terminal rendering engine that lets you build rich TUI applications
            using React components. Flexbox layouts, styling, focus management —
            everything you'd expect from a UI framework, running entirely in your terminal.
          </p>
          <div class="flex gap-2 flex-wrap justify-center md:justify-start">
            <span class="py-1 px-3 border border-gray-700 rounded-full text-[0.72rem] text-gray-400 tracking-[0.04em]">React</span>
            <span class="py-1 px-3 border border-gray-700 rounded-full text-[0.72rem] text-gray-400 tracking-[0.04em]">TypeScript</span>
            <span class="py-1 px-3 border border-gray-700 rounded-full text-[0.72rem] text-gray-400 tracking-[0.04em]">Terminal</span>
            <span class="py-1 px-3 border border-gray-700 rounded-full text-[0.72rem] text-gray-400 tracking-[0.04em]">Renderer</span>
          </div>
          <div class="flex items-center gap-5 mt-4 justify-center md:justify-start">
            <a href="/glyph" class="text-[0.82rem] text-gray-400 hover:text-white transition-colors">Learn more →</a>
            <a href="https://github.com/semos-labs/glyph" target="_blank" rel="noopener" class="text-[0.82rem] text-gray-400 hover:text-white transition-colors">GitHub ↗</a>
            <a href="https://www.npmjs.com/package/@semos-labs/glyph" target="_blank" rel="noopener" class="text-[0.82rem] text-gray-400 hover:text-white transition-colors">npm ↗</a>
          </div>
        </div>
      </div>

      <!-- Aion -->
      <div class="flex flex-col md:flex-row items-center md:items-start gap-6 md:gap-12 p-8 md:p-12 border border-gray-800 rounded-2xl mb-10 transition-colors hover:border-gray-600 text-center md:text-left">
        <div class="shrink-0">
          <img src="/logos/Aion.png" alt="Aion" class="w-20 h-20 rounded-2xl" />
        </div>
        <div class="flex-1">
          <div class="flex items-center gap-3 justify-center md:justify-start">
            <h3 class="font-hand text-[2rem] mb-1">Aion</h3>
            <a class="stars-badge hidden items-center gap-1.5 px-3 py-1 bg-gray-800 border border-gray-600 rounded-full text-[0.8rem] text-gray-200 translate-y-[-2px] hover:border-gray-400 hover:text-white transition-colors" data-repo="semos-labs/aion" href="https://github.com/semos-labs/aion" target="_blank" rel="noopener">
              <svg class="w-3.5 h-3.5 fill-amber-400" viewBox="0 0 16 16"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Z"/></svg>
              <span class="stars-count font-mono font-medium">—</span>
            </a>
            <a id="aion-downloads" class="hidden items-center gap-1.5 px-3 py-1 bg-gray-800 border border-gray-600 rounded-full text-[0.8rem] text-gray-200 translate-y-[-2px] hover:border-gray-400 hover:text-white transition-colors" href="https://github.com/semos-labs/aion/releases" target="_blank" rel="noopener">
              <svg class="w-3.5 h-3.5 fill-gray-300" viewBox="0 0 16 16"><path d="M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14ZM7.25 7.689V2a.75.75 0 0 1 1.5 0v5.689l1.97-1.969a.749.749 0 1 1 1.06 1.06l-3.25 3.25a.749.749 0 0 1-1.06 0L4.22 6.78a.749.749 0 1 1 1.06-1.06l1.97 1.969Z"/></svg>
              <span id="aion-dl-count" class="font-mono font-medium">—</span>
            </a>
          </div>
          <p class="text-[0.9rem] text-gray-400 mb-4 italic">Google Calendar in your terminal</p>
          <p class="text-[0.88rem] text-gray-300 leading-[1.8] mb-5 max-w-full md:max-w-[560px]">
            A full-featured Google Calendar client that runs in your terminal.
            View, create, and manage events without leaving the command line.
            Built with Glyph for a smooth, responsive interface.
          </p>
          <div class="flex gap-2 flex-wrap justify-center md:justify-start">
            <span class="py-1 px-3 border border-gray-700 rounded-full text-[0.72rem] text-gray-400 tracking-[0.04em]">Calendar</span>
            <span class="py-1 px-3 border border-gray-700 rounded-full text-[0.72rem] text-gray-400 tracking-[0.04em]">Google API</span>
            <span class="py-1 px-3 border border-gray-700 rounded-full text-[0.72rem] text-gray-400 tracking-[0.04em]">Glyph</span>
            <span class="py-1 px-3 border border-gray-700 rounded-full text-[0.72rem] text-gray-400 tracking-[0.04em]">TUI</span>
          </div>
          <div class="flex items-center gap-5 mt-4 justify-center md:justify-start">
            <a href="/aion" class="text-[0.82rem] text-gray-400 hover:text-white transition-colors">Learn more →</a>
            <a href="https://github.com/semos-labs/aion" target="_blank" rel="noopener" class="text-[0.82rem] text-gray-400 hover:text-white transition-colors">GitHub ↗</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Newsletter -->
  <section class="py-24 px-8 border-t border-gray-800">
    <div class="max-w-[520px] mx-auto text-center">
      <h2 class="font-hand text-[2.2rem] md:text-[2.8rem] mb-4">Stay in the loop</h2>
      <p class="text-[0.9rem] text-gray-400 leading-[1.7] mb-10">
        Get occasional updates on new releases, features, and tools we're building. No spam, unsubscribe anytime.
      </p>
      <div id="subscribe-form">
      <ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul>
        <form
          action="https://app.kit.com/forms/9086412/subscriptions"
          method="post"
          class="flex gap-3 max-w-md mx-auto md:flex-row flex-col seva-form-formkit-form"
          data-sv-form="9086412"
          data-uid="9bc23479a3"
          data-format="inline"
          data-version="5"
        >
          <input
            type="email"
            name="email_address"
            placeholder="you@example.com"
            required
            class="flex-1 px-4 py-3 bg-gray-900 border border-gray-700 rounded-lg font-mono text-[0.85rem] text-white placeholder-gray-500 outline-none focus:border-gray-400 transition-colors"
          />
          <button
            type="submit"
            class="px-6 py-3 bg-white text-black font-mono text-[0.85rem] font-medium rounded-lg border border-white hover:bg-gray-200 transition-colors cursor-pointer shrink-0"
          >
            Subscribe
          </button>
        </form>
        <p class="mt-4 text-[0.72rem] text-gray-600">
          Powered by <a href="https://kit.com" target="_blank" rel="noopener" class="text-gray-500 hover:text-gray-300 transition-colors">Kit</a>
        </p>
      </div>
      <div id="subscribe-success" class="hidden">
        <p class="text-[1.1rem] text-gray-200 mb-2">✓ You're in!</p>
        <p class="text-[0.85rem] text-gray-400">Check your inbox to confirm your subscription.</p>
      </div>
    </div>
  </section>
</Layout>

<script>
  async function fetchStars() {
    const badges = document.querySelectorAll('.stars-badge');
    for (const badge of badges) {
      const repo = badge.getAttribute('data-repo');
      if (!repo) continue;
      try {
        const res = await fetch(`https://api.github.com/repos/${repo}`);
        if (!res.ok) continue;
        const data = await res.json();
        const count = badge.querySelector('.stars-count');
        if (count) count.textContent = data.stargazers_count?.toLocaleString() ?? '0';
        badge.classList.remove('hidden');
        badge.classList.add('inline-flex');
      } catch { /* silent fail — badge stays hidden */ }
    }
  }

  async function fetchDownloads() {
    try {
      const res = await fetch('https://api.github.com/repos/semos-labs/aion/releases');
      if (!res.ok) return;
      const releases = await res.json();
      const total = releases.reduce((sum: number, r: any) =>
        sum + r.assets.reduce((a: number, asset: any) => a + (asset.download_count || 0), 0), 0);
      const el = document.getElementById('aion-dl-count');
      const badge = document.getElementById('aion-downloads');
      if (el) el.textContent = total.toLocaleString();
      if (badge) { badge.classList.remove('hidden'); badge.classList.add('inline-flex'); }
    } catch { /* silent fail */ }
  }

  // Newsletter form
  const form = document.querySelector('#subscribe-form form') as HTMLFormElement;
  const formWrap = document.getElementById('subscribe-form')!;
  const successEl = document.getElementById('subscribe-success')!;
  const submitBtn = form?.querySelector('button[type="submit"]') as HTMLButtonElement;

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = new FormData(form).get('email_address') as string;
    if (!email) return;

    submitBtn.textContent = 'Sending…';
    submitBtn.classList.add('opacity-60', 'pointer-events-none');

    try {
      const res = await fetch(form.action, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email_address: email }),
      });
      if (res.ok) {
        formWrap.classList.add('hidden');
        successEl.classList.remove('hidden');
      } else {
        throw new Error('Failed');
      }
    } catch {
      // Fallback: submit the form normally so Kit handles it
      form.submit();
    }
  });

  // Also handle redirect back from Kit (fallback)
  if (new URLSearchParams(window.location.search).has('subscription')) {
    formWrap?.classList.add('hidden');
    successEl?.classList.remove('hidden');
  }

  fetchStars();
  fetchDownloads();
</script>
